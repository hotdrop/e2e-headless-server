# AssertText アクション

## 概要
指定されたセレクタに一致する要素の内部テキストに、期待されるテキストが含まれているかどうかを検証（アサート）します。

## 詳細
- このアクションは、まず指定された`selector`で要素を特定します。要素が見つからない場合、`AssertionError` が発生します。
- `text`パラメータは必須であり、指定しない場合は`ValueError`が発生します。
- 要素が見つかった場合、Playwrightの`locator.inner_text()`メソッドを使用して要素の内部テキストを取得し、そのテキストに`text`パラメータで指定された文字列が含まれているか（部分一致）を確認します。
- 期待されるテキストが含まれていない場合、`AssertionError`が発生し、期待したテキストと実際のテキストがエラーメッセージに表示されます。
- `selector` が辞書型で`by: "role"`を指定する場合、`type`パラメータは必須です。このアクションでは `type`のデフォルト値は設定されません。

## パラメータ
このアクションで使用できるパラメータは以下の通りです。

| Key       | 型              | 必/任 | 説明              |
|-----------|-----------------|------|------------------|
| `action`  | string          | 必須  | "assertText" |
| `selector`| string / object | 必須  | 操作対象の要素。セレクタ参照のこと |
| `text`    | string          | 必須  | 要素の内部テキストに含まれていることを期待する文字列。部分一致で検証されます。 |

## セレクタ
このアクションは、検証対象の要素を指定するために以下の形式のセレクタをサポートしています。

### 文字列セレクタ
- CSSセレクタまたはXPathを指定します。
- 例: "p.welcome-message", "//h1[@id='main-title']"

### 辞書型セレクタ
Playwrightの`Locator API`に基づいて辞書形式でセレクタを指定します。サポートしている`by`の種類と、それに応じたパラメータは以下の通りです。

#### `by: "role"`: ARIAロール
- `type`: (必須) ARIAロール名 (例: heading, status, alert)。このアクションでは、ロールタイプを指定する必要があります。
- `name`: (任意) アクセシブルネーム。要素を特定するための名前。

```json
"selector": {
  "by": "role",
  "type": "status",
  "name": "処理結果"
}
```

#### `by: "text"`: 表示テキスト
- `text`: (必須) 検索するテキスト文字列。このテキストを含む要素を探します。（注: この text パラメータはセレクタ用であり、アサーション対象のテキストとは別に指定します）
```json
"selector": {
  "by": "text",
  "text": "現在のスコア:"
}
```

#### `by: "placeholder"`: プレースホルダーテキスト
- `text`: (必須) input要素などのプレースホルダー属性のテキスト文字列。
```json
"selector": {
  "by": "placeholder",
  "text": "レビューコメント"
}
```

#### `by: "label"`: ラベルテキスト
- `name`: (必須) input要素などに関連付けられたラベル要素のテキスト文字列。
```json
"selector": {
  "by": "label",
  "name": "ユーザー名表示エリア"
}
```

## JSONサンプル
特定の要素に期待するテキストが含まれていることを検証する
```json
{
  "action": "assertText",
  "selector": "h1.page-title",
  "text": "マイページ"
}
```

特定のロールを持つ要素に期待するテキストが含まれていることを検証する (辞書型セレクタ)
```json
{
  "action": "assertText",
  "selector": {
    "by": "role",
    "type": "alert",
    "name": "エラー情報"
  },
  "text": "入力内容に誤りがあります"
}
```

IDで指定した要素内のテキストを検証
```json
{
  "action": "assertText",
  "selector": "#system-message",
  "text": "保存しました"
}
```
